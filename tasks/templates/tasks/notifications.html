{% extends 'base.html' %}

{% block title %}Notifications - Nawara Time Manager{% endblock %}

{% block content %}
<div class="mb-4">
    <h1 class="display-5">
        <i class="bi bi-bell"></i> Mes notifications
    </h1>
</div>

{% if notifications %}
<div class="card">
    <div class="list-group list-group-flush">
        {% for notification in notifications %}
        <div class="list-group-item {% if not notification.is_read %}list-group-item-primary{% endif %}">
            <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">
                    {% if not notification.is_read %}
                    <i class="bi bi-circle-fill text-primary" style="font-size: 0.5rem;"></i>
                    {% endif %}
                    {{ notification.message }}
                </h5>
                <small class="text-muted">{{ notification.created_at|date:"d/m/Y H:i" }}</small>
            </div>
            {% if notification.task %}
            <p class="mb-1">
                <a href="{% url 'task_detail' notification.task.pk %}" class="text-decoration-none">
                    <i class="bi bi-arrow-right"></i> Voir la t√¢che : {{ notification.task.title }}
                </a>
            </p>
            {% endif %}
            {% if not notification.is_read %}
            <small class="text-primary"><i class="bi bi-info-circle"></i> Non lue</small>
            {% else %}
            <small class="text-muted"><i class="bi bi-check"></i> Lue</small>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>
{% else %}
<div class="alert alert-info text-center">
    <i class="bi bi-bell-slash" style="font-size: 2rem;"></i>
    <p class="mt-2 mb-0">Aucune notification pour le moment.</p>
</div>
{% endif %}

<div class="text-center mt-4">
    <a href="{% url 'dashboard' %}" class="btn btn-secondary">
        <i class="bi bi-arrow-left"></i> Retour au tableau de bord
    </a>
</div>
{% endblock %}
